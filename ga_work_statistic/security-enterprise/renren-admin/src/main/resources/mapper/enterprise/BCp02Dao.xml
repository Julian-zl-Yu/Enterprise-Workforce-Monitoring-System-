<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="io.renren.modules.enterprise.bcp02.dao.BCp02Dao">

    <resultMap type="io.renren.modules.enterprise.bcp02.entity.BCp02Entity" id="bCp02Map">
        <result property="cp0201" column="CP0201"/>
        <result property="cp0101" column="CP0101"/>
        <result property="corpcode" column="CORPCODE"/>
        <result property="corpname" column="CORPNAME"/>
        <result property="organizationtype" column="ORGANIZATIONTYPE"/>
        <result property="areacode" column="AREACODE"/>
        <result property="address" column="ADDRESS"/>
        <result property="zipcode" column="ZIPCODE"/>
        <result property="legalman" column="LEGALMAN"/>
        <result property="idcardtype" column="IDCARDTYPE"/>
        <result property="legalmanidcardnumber" column="LEGALMANIDCARDNUMBER"/>
        <result property="regcapital" column="REGCAPITAL"/>
        <result property="capitalcurrencytype" column="CAPITALCURRENCYTYPE"/>
        <result property="establishdate" column="ESTABLISHDATE"/>
        <result property="officephone" column="OFFICEPHONE"/>
        <result property="faxnumber" column="FAXNUMBER"/>
        <result property="linkman" column="LINKMAN"/>
        <result property="linkphone" column="LINKPHONE"/>
        <result property="linkcellphone" column="LINKCELLPHONE"/>
        <result property="email" column="EMAIL"/>
        <result property="website" column="WEBSITE"/>
        <result property="businessstatus" column="BUSINESSSTATUS"/>
        <result property="entscope" column="ENTSCOPE"/>
        <result property="regdept" column="REGDEPT"/>
        <result property="memo" column="MEMO"/>
        <result property="creator" column="CREATOR"/>
        <result property="createDate" column="CREATE_DATE"/>
        <result property="updater" column="UPDATER"/>
        <result property="updateDate" column="UPDATE_DATE"/>
        <result property="deptId" column="DEPT_ID"/>
        <result property="cp02Status" column="CP02_STATUS"/>
        <result property="reason" column="REASON"/>
    </resultMap>

    <sql id="Base_Column_List">
        cp0201,cp0101, corpcode, corpname, organizationtype, areacode, address, zipcode, legalman, idcardtype, legalmanidcardnumber, regcapital, capitalcurrencytype, establishdate, officephone, faxnumber, linkman, linkphone, linkcellphone, email, website, businessstatus, entscope, regdept, memo, creator, create_date, updater, update_date, dept_id,cp02_Status,reason
    </sql>

    <select id="getList" resultType="io.renren.modules.enterprise.bcp02.dto.BCp02DTO">
        select aa.* from (select b.* from b_cp01 a,B_CP02 b
        where a.cp0101=b.cp0101) aa,
        (select c.id
        from sys_dept c
        where 1=1
        <if test="deptId!=null and deptId!=''">
            and c.pids like '%'||#{deptId}||'%'
        </if>
        <if test="deptIdSelf!=null and deptIdSelf!=''">
            and c.id = #{deptIdSelf}
        </if>
        ) bb
        where aa.dept_id=bb.id
        <if test="corpname!=null and corpname!=''">
            and aa.corpname like '%'||#{corpname}||'%'
        </if>
        <if test="organizationtype!=null and organizationtype!=''">
            and aa.organizationtype=#{organizationtype}
        </if>
        <if test="cp02Status!=null and cp02Status!=''">
            and aa.cp02_status=#{cp02Status}
        </if>
        order by CREATE_DATE desc
    </select>

</mapper>